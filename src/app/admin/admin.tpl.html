<tabset>
    <button class="btn btn-sm btn-default pull-right" ng-show="ProviderTabActive" ng-click="createProvider()">Add Physician/Nurse</button>
    <button class="btn btn-sm btn-default pull-right" ng-show="SupporterTabActive" ng-click="createSupporter()">Add Supporter</button>

    <tab heading="Patients" id="patient-tab" ng-click="ProviderTabActive=false;SupporterTabActive=false">
        <table id="patient-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByFieldPatient=['LastName', 'FirstName']; reverseSortPatient = !reverseSortPatient">
                            Full Name
                        </a>
                        <span ng-show="orderByFieldPatient == ['LastName', 'FirstName']" class="fa"
                              ng-class="reverseSortPatient ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByFieldPatient='UserName'; reverseSortPatient = !reverseSortPatient">
                            UserName
                        </a>
                        <span ng-show="orderByFieldPatient == 'UserName'"
                              class="fa"
                              ng-class="reverseSortPatient ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-4">
                        <a href="#" ng-click="orderByFieldPatient='Email'; reverseSortPatient = !reverseSortPatient">
                            Email
                        </a>
                        <span ng-show="orderByFieldPatient == 'Email'"
                              class="fa"
                              ng-class="reverseSortPatient ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-4"></th>
                    <th style="width:69px;">Remove</th>
                    <th style="width:69px;">CareTeam</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="patient in users | orderBy:orderByFieldPatient:reverseSortPatient | filter:{Roles:'Patient'}">
                    <td>{{patient.LastName}}, {{patient.FirstName}}</td>
                    <td>{{patient.UserName}}</td>
                    <td>{{patient.Email}}</td>
                    <td></td>
                    <td align="center">
                        <button id="remove-patient" class="btn btn-danger btn-xs center-block" ng-click="removeUser(patient)">
                            <i class="glyphicon glyphicon-trash"></i>
                        </button>
                    </td>
                    <td align="center">
                        <button id="create-careteam"class="btn btn-primary btn-xs" ng-click="createCareTeam(patient)">
                            <i class="glyphicon glyphicon-plus"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </tab>
    <tab heading="Physicians & Nurses" id="provider-tab" ng-click="ProviderTabActive=true;SupporterTabActive=false">
        <table id="provider-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByFieldProvider=['LastName', 'FirstName']; reverseSortProvider = !reverseSortProvider">
                            Full Name
                        </a>
                        <span ng-show="orderByFieldProvider == ['LastName', 'FirstName']"
                              class="fa"
                              ng-class="reverseSortProvider ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByFieldProvider='UserName'; reverseSortProvider = !reverseSortProvider">
                            UserName
                        </a>
                        <span ng-show="orderByFieldProvider == 'UserName'"
                              class="fa"
                              ng-class="reverseSortProvider ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-4">
                        <a href="#" ng-click="orderByFieldProvider='Email'; reverseSortProvider = !reverseSortProvider">
                            Email
                        </a>
                        <span ng-show="orderByFieldProvider == 'Email'"
                              class="fa"
                              ng-class="reverseSortProvider ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-4">
                        <a href="#" ng-click="orderByFieldProvider='Roles'; reverseSortProvider = !reverseSortProvider">
                            Role
                        </a>
                        <span ng-show="orderByFieldProvider == 'Roles'"
                              class="fa"
                              ng-class="reverseSortProvider ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th style="width:69px;">
                        Remove
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="provider in users | orderBy:orderByFieldProvider:reverseSortProvider | filter:isProvider">
                    <td>{{provider.LastName}}, {{provider.FirstName}}</td>
                    <td>{{provider.UserName}}</td>
                    <td>{{provider.Email}}</td>
                    <td>
                        <div ng-repeat="role in provider.Roles">
                            {{role}}
                        </div>
                    </td>
                    <td>
                        <button id="remove-provider" class="btn btn-danger btn-xs center-block" ng-click="removeUser(provider)">
                            <i class="glyphicon glyphicon-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </tab>
    <tab heading="Supporters" id="supporter-tab" ng-click="ProviderTabActive=false;SupporterTabActive=true">
        <table id="supporter-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByFieldSupporter = ['LastName', 'FirstName']; reverseSortSupporter = !reverseSortSupporter">
                            Full Name
                        </a>
                        <span ng-show="orderByFieldSupporter == 'LastName'" class="fa"
                              ng-class="reverseSortSupporter ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByFieldSupporter ='UserName'; reverseSortSupporter = !reverseSortSupporter">
                            UserName
                        </a>
                        <span ng-show="orderByFieldSupporter == 'UserName'" class="fa"
                              ng-class="reverseSortSupporter ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByFieldSupporter ='Email'; reverseSortSupporter = !reverseSortSupporter">
                            Email
                        </a>
                        <span ng-show="orderByFieldSupporter == 'Email'" class="fa"
                              ng-class="reverseSortSupporter ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>

                    <th class="col-md-3">CareTeam</th>
                    <th style="width:69px;">Remove</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="supporter in users | orderBy:orderByFieldSupporter:reverseSortSupporter | filter:{Roles:'Supporter'}">
                    <td>{{supporter.LastName}}, {{supporter.FirstName}}</td>
                    <td>{{supporter.UserName}}</td>
                    <td>{{supporter.Email}}</td>
                    <td>
                        <ul>
                            <li ng-repeat="careTeamName in supporter.SupporterCareTeamNames">{{careTeamName}}</li>
                        </ul>
                    </td>
                    <td align="center">
                        <button id="remove-supporter" class="btn btn-danger btn-xs" ng-click="removeUser(supporter)">
                            <i class="glyphicon glyphicon-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </tab>
    <tab heading="CareTeams" id="careteam-tab" ng-click="ProviderTabActive=false;SupporterTabActive=false">
        <table id="careteams-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>
                        <a href="#" ng-click="orderByFieldCareTeam='Name'; reverseSortCareTeam = !reverseSortCareTeam">
                            Name
                        </a>
                        <span ng-show="orderByFieldCareTeam == 'Name'"
                              class="fa"
                              ng-class="reverseSortCareTeam ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="orderByFieldCareTeam=['Patient.LastName', 'Patient.FirstName']; reverseSortCareTeam = !reverseSortCareTeam">
                            Patient
                        </a>
                        <span ng-show="orderByFieldCareTeam == ['Patient.LastName', 'Patient.FirstName']"
                              class="fa"
                              ng-class="reverseSortCareTeam ? 'fa-caret-up' : 'fa-caret-down'"></span>
                    </th>
                    <th>Providers</th>
                    <th>Supporters</th>
                    <th style="width:69px;">Remove</th>
                    <th style="width:69px;">Update</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="careTeam in careTeams | orderBy:orderByFieldCareTeam:reverseSortCareTeam">
                    <td>{{careTeam.Name}}</td>
                    <td>{{careTeam.Patient.LastName}}, {{careTeam.Patient.FirstName}}</td>
                    <td>
                        <ul>
                            <li ng-repeat="provider in careTeam.Providers">{{provider.LastName}}, {{provider.FirstName}} - {{provider.Roles[0]}}</li>
                        </ul>
                    </td>
                    <td>
                        <ul>
                            <li ng-repeat="supporter in careTeam.Supporters">{{supporter.LastName}}, {{supporter.FirstName}}</li>
                        </ul>
                    </td>
                    <td align="center">
                        <button id="remove-careteam" class="btn btn-danger btn-xs" ng-click="removeCareTeam(careTeam)">
                            <i class="glyphicon glyphicon-trash"></i>
                        </button>
                    </td>
                    <td align="center">
                        <button id="update-careteam" class="btn btn-primary btn-xs" ng-click="updateCareTeam(careTeam)">
                            <i class="glyphicon glyphicon-wrench"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
        <div ng-hide="inactiveTeamsEmpty">
            <label>Pending Patient Approval</label>
            <table id="inactive-careteams-list" class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>
                            <a href="#" ng-click="orderByFieldCareTeam='Name'; reverseSortCareTeam = !reverseSortCareTeam">
                                Name <span class="fa"
                                           ng-show="orderByFieldCareTeam == 'Name'"
                                           ng-class="reverseSortCareTeam ? 'fa-caret-up' : 'fa-caret-down'"></span>
                            </a>
                        </th>
                        <th>
                            <a href="#" ng-click="orderByFieldCareTeam=['Patient.LastName', 'Patient.FirstName']; reverseSortCareTeam = !reverseSortCareTeam">
                                Patient <span class="fa"
                                              ng-show="orderByFieldCareTeam == ['Patient.LastName', 'Patient.FirstName']"
                                              ng-class="reverseSortCareTeam ? 'fa-caret-up' : 'fa-caret-down'"></span>
                            </a>
                        </th>
                        <th>Providers</th>
                        <th>Supporters</th>
                        <th style="width:69px;">Remove</th>
                        <th style="width:69px;">Update</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="careTeam in inactiveTeams | orderBy:orderByFieldCareTeam:reverseSortCareTeam">
                        <td>{{careTeam.Name}}</td>
                        <td>{{careTeam.Patient.LastName}}, {{careTeam.Patient.FirstName}}</td>
                        <td>
                            <ul>
                                <li ng-repeat="provider in careTeam.Providers">{{provider.LastName}}, {{provider.FirstName}} - {{provider.Roles[0]}}</li>
                            </ul>
                        </td>
                        <td>
                            <ul>
                                <li ng-repeat="supporter in careTeam.Supporters">{{supporter.LastName}}, {{supporter.FirstName}}</li>
                            </ul>
                        </td>
                        <td align="center">
                            <button id="remove-inactive-careteam" class="btn btn-danger btn-xs" ng-click="removeCareTeam(careTeam)">
                                <i class="glyphicon glyphicon-trash"></i>
                            </button>
                        </td>
                        <td align="center">
                            <button id="update-inactive-careteam" class="btn btn-primary btn-xs" ng-click="updateCareTeam(careTeam)">
                                <i class="glyphicon glyphicon-wrench"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </tab>
</tabset>
