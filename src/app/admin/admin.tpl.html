<tabset>
    <button class="btn btn-sm btn-default pull-right" ng-show="PhysicianTabActive" ng-click="createUser()">Add Physician/Nurse</button>

    <tab heading="Patients" id="patient-tab" ng-click="PhysicianTabActive=false">
        <table id="patient-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th class="col-md-3">
                        <a href="#" ng-click="PatientorderByField='LastName'; PatientreverseSort = !PatientreverseSort">
                            Full Name <span ng-show="PatientorderByField == 'LastName'" class="fa" ng-class="PatientreverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th class="col-md-3">
                        <a href="#" ng-click="PatientorderByField='UserName'; PatientreverseSort = !PatientreverseSort">
                            UserName <span ng-show="PatientorderByField == 'UserName'" class="fa" ng-class="PatientreverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th class="col-md-4">
                        <a href="#" ng-click="PatientorderByField='Email'; PatientreverseSort = !PatientreverseSort">
                            Email <span ng-show="PatientorderByField == 'Email'" class="fa" ng-class="PatientreverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th class="col-md-4"></th>
                    <th style="width:69px;">Edit</th>
                    <th style="width:69px;">Team</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in users | orderBy:PatientorderByField:PatientreverseSort | filter:{Roles:'Patient'}">
                    <td>{{user.LastName}}, {{user.FirstName}}</td>
                    <td>{{user.UserName}}</td>
                    <td>{{user.Email}}</td>
                    <td></td>
                    <td><button class="btn btn-danger btn-xs" ng-click="removeUser(user)"><i class="glyphicon glyphicon-trash"></i></button></td>
                    <td align="center">
                        <button class="btn btn-primary btn-xs" ng-click="createCareTeam(user)">
                            <i class="glyphicon glyphicon-pencil"></i>Create
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </tab>
    <tab heading="Physicians & Nurses" id="physician-tab" ng-click="PhysicianTabActive=true">
        <table id="physician-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByField='LastName'; reverseSort = !reverseSort">
                            Full Name <span ng-show="orderByField == 'LastName'" class="fa" ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th class="col-md-3">
                        <a href="#" ng-click="orderByField='UserName'; reverseSort = !reverseSort">
                            UserName <span ng-show="orderByField == 'UserName'" class="fa" ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th class="col-md-4">
                        <a href="#" ng-click="orderByField='Email'; reverseSort = !reverseSort">
                            Email <span ng-show="orderByField == 'Email'" class="fa" ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th class="col-md-4">
                        <a href="#" ng-click="orderByField='Roles'; reverseSort = !reverseSort">
                            Roles <span ng-show="orderByField == 'Roles'" class="fa" ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th style="width:69px;">
                        Edit
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in users | orderBy:orderByField:reverseSort | filter:PhysicianOrNurse">
                    <td>{{user.LastName}}, {{user.FirstName}}</td>
                    <td>{{user.UserName}}</td>
                    <td>{{user.Email}}</td>
                    <td>
                        <div ng-repeat="role in user.Roles">
                            {{role}}
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-danger btn-xs" ng-click="removeUser(user)">
                            <i class="glyphicon glyphicon-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </tab>
    <tab heading="Care Team" id="careteam-tab" ng-click="PhysicianTabActive=false">
        <table id="careteams-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>
                        <a href="#" ng-click="CareOrderByField='Name'; CareReverseSort = !CareReverseSort">
                            CareTeam Name <span ng-show="CareOrderByField == 'Name'" class="fa" ng-class="CareReverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th>
                        <a href="#" ng-click="CareOrderByField='Patient.LastName'; CareReverseSort = !CareReverseSort">
                            Patient <span ng-show="CareOrderByField == 'Patient.LastName'" class="fa" ng-class="CareReverseSort ? 'fa-caret-up' : 'fa-caret-down'"></span>
                        </a>
                    </th>
                    <th>Providers</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="careTeam in careTeams | orderBy:orderByField:reverseSort">
                    <td>{{careTeam.Name}}</td>
                    <td>{{careTeam.Patient.LastName}}, {{careTeam.Patient.FirstName}}</td>
                    <td>
                        <ul>
                            <li ng-repeat="provider in careTeam.Providers">{{provider.LastName}}, {{provider.FirstName}} - {{provider.Roles[0]}}</li>
                        </ul>
                    </td>
                </tr>
            </tbody>
        </table>
    </tab>
</tabset>