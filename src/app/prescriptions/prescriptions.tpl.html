<h2>Prescriptions</h2>
<tabset>
    <tab heading="Active" id="active-tab">
        <table id="active-prescription-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>
                        <a href="#" ng-click="orderByField='MedicationCode'; reverseSort = !reverseSort">
                            Medication
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'MedicationCode'"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="orderByField='PatientName'; reverseSort = !reverseSort">
                            Patient
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'PatientName'"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="orderByField='StartDate'; reverseSort = !reverseSort">
                            Start Date
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'StartDate'"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="orderByField='EndDate'; reverseSort = !reverseSort">
                            End Date
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'EndDate'"></span>
                    </th>
                    <th>Frequency</th>
                    <th>Dosage</th>
                    <th>Notes</th>
                    <th style="width:69px;" class="text-center">Edit</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="prescription in activePrescriptions | orderBy:orderByField:reverseSort">
                    <td>{{prescription.MedicationCode}} ({{prescription.MedicationName}})</td>
                    <td>{{prescription.PatientName}}</td>
                    <td>{{prescription.StartDate | date}}</td>
                    <td>{{prescription.EndDate | date}}</td>
                    <td>{{prescription.Frequency}}</td>
                    <td>{{prescription.Dosage}}</td>
                    <td class="col-md-3">
                        <button popover="{{prescription.Notes}}" popover-placement="bottom" popover-trigger="mouseenter" class="btn btn-default">{{prescription.Notes | cutTo:true:40}}</button>
                    </td>
                    <td>
                        <button id="update-prescription" class="btn btn-danger btn-xs center-block" ng-click="updatePrescription(prescription)">
                            <i class="glyphicon glyphicon-wrench"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
     </tab>
    <tab heading="Expired" id="expired-tab">
        <table id="expired-prescription-list" class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>
                        <a href="#" ng-click="orderByField='MedicationCode'; reverseSort = !reverseSort">
                            Medication
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'MedicationCode'"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="orderByField='PatientName'; reverseSort = !reverseSort">
                            Patient
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'PatientName'"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="orderByField='StartDate'; reverseSort = !reverseSort">
                            Start Date
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'StartDate'"></span>
                    </th>
                    <th>
                        <a href="#" ng-click="orderByField='EndDate'; reverseSort = !reverseSort">
                            End Date
                        </a>
                        <span class="fa"
                              ng-class="reverseSort ? 'fa-caret-up' : 'fa-caret-down'"
                              ng-show="orderByField == 'EndDate'"></span>
                    </th>
                    <th>Frequency</th>
                    <th>Dosage</th>
                    <th>Notes</th>
                    <th style="width:69px;" class="text-center">Remove</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="prescription in expiredPrescriptions | orderBy:orderByField:reverseSort">
                    <td>{{prescription.MedicationCode}} ({{prescription.MedicationName}})</td>
                    <td>{{prescription.PatientName}}</td>
                    <td>{{prescription.StartDate | date}}</td>
                    <td>{{prescription.EndDate | date}}</td>
                    <td>{{prescription.Frequency}}</td>
                    <td>{{prescription.Dosage}}</td>
                    <td class="col-md-3">
                        <button popover="{{prescription.Notes}}" popover-placement="bottom" popover-trigger="mouseenter" class="btn btn-default">{{prescription.Notes | cutTo:true:40}}</button>
                    </td>
                    <td>
                        <button id="remove-prescription" class="btn btn-danger btn-xs center-block" ng-click="removePrescription(prescription)">
                            <i class="glyphicon glyphicon-trash"></i>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </tab>
</tabset>